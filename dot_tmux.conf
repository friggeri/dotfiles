# Modern tmux configuration
# Updated from old config for tmux 3.x+

# ============================================================================
# Terminal & Display Settings
# ============================================================================

# Enable true color support and better terminal compatibility
set -g default-terminal "tmux-256color"
set -ga terminal-overrides ",*256col*:Tc"

# Faster command sequences (reduce escape time for vim/neovim)
set -sg escape-time 10

# Increase history limit
set -g history-limit 50000

# Enable focus events for better vim integration
set -g focus-events on

# ============================================================================
# Mouse Support
# ============================================================================

# Enable mouse support (modernized syntax)
set -g mouse on

# ============================================================================
# Window & Pane Numbering
# ============================================================================

# Start window numbering at 0
set -g base-index 0

# Start pane numbering at 0
setw -g pane-base-index 0

# Renumber windows when one is closed
set -g renumber-windows on

# ============================================================================
# Keybindings
# ============================================================================

# Reload configuration
bind r source-file ~/.tmux.conf \; display "Config reloaded!"

# Split panes
bind -n C-s split-window -v -c "#{pane_current_path}"      # Horizontal split (below)
bind -n C-S-s split-window -h -c "#{pane_current_path}"    # Vertical split (right)

# Navigate panes with Ctrl+Arrow (without prefix)
bind -n C-Left select-pane -L
bind -n C-Right select-pane -R
bind -n C-Up select-pane -U
bind -n C-Down select-pane -D

# Resize panes with Ctrl+Shift+Arrow
bind -n C-S-Left resize-pane -L 2
bind -n C-S-Right resize-pane -R 2
bind -n C-S-Up resize-pane -U 2
bind -n C-S-Down resize-pane -D 2

# Navigate windows with Alt+Arrow
bind -n M-Left previous-window
bind -n M-Right next-window

# Cycle windows with Alt+Tab
bind -n M-Tab next-window
bind -n M-S-Tab previous-window

# Toggle pane zoom with space
bind -n M-Space resize-pane -Z

# Create new window
bind -n C-t new-window -c "#{pane_current_path}"

# ============================================================================
# Copy Mode (Vi-style)
# ============================================================================

# Use vi keybindings in copy mode
setw -g mode-keys vi

# Modern copy mode bindings (tmux 2.4+)
bind -T copy-mode-vi v send -X begin-selection
bind -T copy-mode-vi y send -X copy-selection-and-cancel
bind -T copy-mode-vi C-v send -X rectangle-toggle

# ============================================================================
# Window Management
# ============================================================================

# Disable automatic window renaming
set -g allow-rename off
set -g automatic-rename off

# Monitor window activity
setw -g monitor-activity on
set -g visual-activity off

# ============================================================================
# Status Bar Configuration
# ============================================================================

# Position status bar at bottom
set -g status-position bottom

# Update status bar more frequently
set -g status-interval 5

# Center window list
set -g status-justify centre

# Status bar colors
set -g status-style bg=colour235,fg=colour250

# Left status (session name)
set -g status-left-length 40
set -g status-left "#[fg=colour39,bold]#S #[fg=colour245]| "

# Right status (hostname and time)
set -g status-right-length 60
set -g status-right "#[fg=colour245]| #[fg=colour250]#H #[fg=colour245]| #[fg=colour39]%H:%M %Z #[fg=colour245]| #[fg=colour250]%Y-%m-%d"

# Window status format
setw -g window-status-format "#[fg=colour245]#I:#W#F"
setw -g window-status-current-format "#[fg=colour39,bold]#I:#W#F"

# Activity window style
setw -g window-status-activity-style fg=colour214,bold

# ============================================================================
# Pane Borders
# ============================================================================

set -g pane-border-style fg=colour238
set -g pane-active-border-style fg=colour39

# ============================================================================
# Message Display
# ============================================================================

set -g message-style bg=colour235,fg=colour39,bold
set -g display-time 2000

# ============================================================================
# Additional Modern Features
# ============================================================================

# Enable RGB color support
set -sa terminal-overrides ",*:RGB"

# Don't show "Activity in window X" messages
set -g visual-activity off
set -g visual-bell off
set -g visual-silence off

# Aggressive resize (useful for multiple monitors)
setw -g aggressive-resize on
